{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _assertThisInitialized from\"@babel/runtime/helpers/assertThisInitialized\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}import React from\"react\";import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import Image from\"react-native-web/dist/exports/Image\";import TextInput from\"react-native-web/dist/exports/TextInput\";import TouchableHighlight from\"react-native-web/dist/exports/TouchableHighlight\";import SectionList from\"react-native-web/dist/exports/SectionList\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import AsyncStorage from'@react-native-async-storage/async-storage';import Button from\"react-native-web/dist/exports/Button\";import{timeoutPromise,getWeatherTab,refreshToken,getRaceList}from\"./tools\";import Table from\"./Table\";import image from\"./logo.png\";var NewHelpScreen=function(_React$Component){_inherits(NewHelpScreen,_React$Component);var _super=_createSuper(NewHelpScreen);function NewHelpScreen(props){var _this;_classCallCheck(this,NewHelpScreen);_this=_super.call(this,props);_this.getRaceID=function(event){var id=event.target.value;AsyncStorage.setItem(\"raceIDHelper\",event.target.value);_this.saveRaceIDinState();};_this.changeRace=function(event){event.preventDefault();_this.getGroup();};_this.changeLogout=function(event){event.preventDefault();_this.props.navigation.replace('Logout');};_this.changeNewUser=function(event){event.preventDefault();_this.props.navigation.push('NewUser');};_this.changeNewOrder=function(event){event.preventDefault();_this.props.navigation.push('NewOrder');};_this.changeWeather=function(event){event.preventDefault();_this.props.navigation.push('Weather');};_this.changeShowRace=function(event){event.preventDefault();_this.props.navigation.push('ShowRace');};_this.changeWheel=function(event){event.preventDefault();_this.props.navigation.push('Wheel');};_this.changeNewFormel=function(event){event.preventDefault();_this.props.navigation.push('NewFormel');};_this.changeAstrid=function(event){event.preventDefault();_this.props.navigation.push('Astrid');};_this.changeMaen=function(event){event.preventDefault();_this.props.navigation.push('Maen');};_this.changeNewRace=function(event){event.preventDefault();_this.props.navigation.push('NewRace');};_this.changeLogout=function(event){event.preventDefault();_this.props.navigation.replace('Logout');};_this.handleSubmit=function(event){event.preventDefault();_this.sendNewWeatherRequest(parseFloat(_this.state.temp_air),parseFloat(_this.state.temp_ground),_this.state.weather_des);};_this.sleep=function(milliseconds){return new Promise(function(resolve){return setTimeout(resolve,milliseconds);});};_this.state={temp_ground:0.0,temp_air:0.0,weather_des:\"\",datetime:\"\",raceList:[],dataWeather:[],time:'',seconds:0,raceid:0,lastStemp:''};_this.timer=0;_this.startTimer=_this.startTimer.bind(_assertThisInitialized(_this));_this.countDown=_this.countDown.bind(_assertThisInitialized(_this));return _this;}_createClass(NewHelpScreen,[{key:\"getSecondsToNextMeasurement\",value:function getSecondsToNextMeasurement(ttemp){var lastDate=new Date(Date.parse(ttemp.datetime)).getTime()/1000;var nowDate=new Date().getTime()/1000;var result=1800-Math.floor(nowDate-lastDate);if(result<=0){this.setState({time:'Jetzt fÃ¤llig!'});clearInterval(this.timer);}else{this.setState({seconds:result});this.startTimer();}}},{key:\"secondsToTime\",value:function secondsToTime(secs){var hours=Math.floor(secs/(60*60));var divisor_for_minutes=secs%(60*60);var minutes=Math.floor(divisor_for_minutes/60);var divisor_for_seconds=divisor_for_minutes%60;var seconds=Math.ceil(divisor_for_seconds);if(hours.toString().length==1){hours=\"0\"+hours;}if(minutes.toString().length==1){minutes=\"0\"+minutes;}if(seconds.toString().length==1){seconds=\"0\"+seconds;}var obj=hours+\":\"+minutes+\":\"+seconds;return obj;}},{key:\"startTimer\",value:function startTimer(){if(this.timer==0&&this.state.seconds>0){this.timer=setInterval(this.countDown,1000);}}},{key:\"countDown\",value:function countDown(){var seconds=this.state.seconds-1;this.setState({time:this.secondsToTime(seconds),seconds:seconds});if(seconds==0){clearInterval(this.timer);}}},{key:\"saveRaceIDinState\",value:function saveRaceIDinState(){var id;return _regeneratorRuntime.async(function saveRaceIDinState$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"raceIDHelper\"));case 2:id=_context.sent;this.setState({raceid:id});this.getWeatherData(id);case 5:case\"end\":return _context.stop();}}},null,this,null,Promise);}},{key:\"getWeatherData\",value:function getWeatherData(raceID){var _this2=this;var accesstoken;return _regeneratorRuntime.async(function getWeatherData$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _regeneratorRuntime.awrap(AsyncStorage.getItem('accesstoken'));case 2:accesstoken=_context2.sent;getWeatherTab(accesstoken,raceID).then(function(DataTabular){_this2.setState({dataWeather:DataTabular});_this2.setState({lastStemp:_this2.state.dataWeather[_this2.state.dataWeather.length-1]});if(_this2.state.lastStemp!=null){_this2.getSecondsToNextMeasurement(_this2.state.lastStemp);}else{clearInterval(_this2.timer);_this2.timer=0;_this2.setState({time:'00:00:00'});}}).catch(function(error){console.log(error);});case 4:case\"end\":return _context2.stop();}}},null,null,null,Promise);}},{key:\"componentDidMount\",value:function componentDidMount(){var _this3=this;var timeLeftVar,accesstoken;return _regeneratorRuntime.async(function componentDidMount$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:timeLeftVar=this.secondsToTime(this.state.seconds);this.setState({time:timeLeftVar});_context3.next=4;return _regeneratorRuntime.awrap(AsyncStorage.getItem('accesstoken'));case 4:accesstoken=_context3.sent;getRaceList(accesstoken).then(function(racelistDropdown){_this3.setState({raceList:racelistDropdown});try{_this3.setState({raceid:racelistDropdown[0].id});}catch(e){console.log(e);}}).catch(function(error){console.log(error);});try{this.getWeatherData(1);}catch(e){console.log(\"Couldnt get WeatherData for RaceId 1\");}case 7:case\"end\":return _context3.stop();}}},null,this,null,Promise);}},{key:\"getGroup\",value:function getGroup(){var group;return _regeneratorRuntime.async(function getGroup$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"usergroup\"));case 2:group=_context4.sent;console.log(group);if(group===\"Helper\"){this.props.navigation.push(\"HelperNavigator\");}if(group===\"Ingenieur\"){this.props.navigation.push(\"Nav\");}if(group===\"Manager\"){this.props.navigation.push(\"Race\");}case 7:case\"end\":return _context4.stop();}}},null,this,null,Promise);}},{key:\"validateForm\",value:function validateForm(){return this.state.weather_des.length>0&&this.state.raceid!=0;}},{key:\"sendNewWeatherRequest\",value:function sendNewWeatherRequest(temp_air,temp_ground,weather_des){var _this4=this;var id;return _regeneratorRuntime.async(function sendNewWeatherRequest$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"raceIDHelper\"));case 2:id=_context5.sent;timeoutPromise(2000,fetch('https://api.race24.cloud/user/weather/create',{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({raceID:id,temp_air:parseFloat(temp_air),temp_ground:parseFloat(temp_ground),weather_des:weather_des})})).then(function(response){return response.json();}).then(console.log(\"success\")).catch(function(error){console.log('error');});this.sleep(2500).then(function(r){console.log(\"weather saved!\");_this4.getWeatherData(_this4.state.raceid);});case 5:case\"end\":return _context5.stop();}}},null,this,null,Promise);}},{key:\"render\",value:function render(){var _this5=this;var optionTemplate=this.state.raceList.map(function(v){return React.createElement(\"option\",{value:v.id,key:v.id},v.name);});return React.createElement(View,{style:{overflowY:'scroll',flex:1,backgroundColor:'#2e3742'}},React.createElement(\"nav\",{className:\"navbar navbar-light\",style:{backgroundColor:'#d0d7de'}},React.createElement(\"div\",{className:\"container-fluid\"},React.createElement(\"a\",{className:\"navbar-brand\",href:\"#\"},\" \",React.createElement(\"img\",{src:image,style:{width:'70%'}}),\" \"),React.createElement(\"button\",{className:\"navbar-toggler\",type:\"button\",\"data-bs-toggle\":\"collapse\",\"data-bs-target\":\"#navbarSupportedContent\",\"aria-controls\":\"navbarSupportedContent\",\"aria-expanded\":\"false\",\"aria-label\":\"Toggle navigation\"},React.createElement(\"span\",{className:\"navbar-toggler-icon\"})),React.createElement(\"div\",{className:\"collapse navbar-collapse\",id:\"navbarSupportedContent\"},React.createElement(\"ul\",{className:\"navbar-nav me-auto mb-2 mb-lg-0\"},React.createElement(\"li\",{className:\"nav-item\"},React.createElement(\"button\",{style:{backgroundColor:'#d0d7de'},className:\"btn btn-sm\",\"aria-current\":\"page\",onClick:this.changeRace},\"Hauptmen\\xFC \")),React.createElement(\"li\",{className:\"nav-item\"},React.createElement(\"button\",{style:{backgroundColor:'#d0d7de'},className:\"btn btn-sm\",\"aria-current\":\"page\",onClick:this.changeNewRace},\"Neue Renndaten anlegen \")),React.createElement(\"li\",{className:\"nav-item\"},React.createElement(\"button\",{style:{backgroundColor:'#d0d7de'},className:\"btn btn-sm\",\"aria-current\":\"page\",onClick:this.changeShowRace},\"Renndaten anzeigen \")),React.createElement(\"li\",{className:\"nav-item\"},React.createElement(\"button\",{style:{backgroundColor:'#d0d7de'},className:\"btn btn-sm\",\"aria-current\":\"page\",onClick:this.changeNewOrder},\"Reifenbestellungen verwalten \")),React.createElement(\"li\",{className:\"nav-item\"},React.createElement(\"button\",{style:{backgroundColor:'#d0d7de'},className:\"btn btn-sm\",\"aria-current\":\"page\",onClick:this.changeAstrid},\"Berechnung Reifendruck \")),React.createElement(\"li\",{className:\"nav-item\"},React.createElement(\"button\",{style:{backgroundColor:'#d0d7de'},className:\"btn btn-sm\",\"aria-current\":\"page\",onClick:this.changeWheel},\"Reifendetails anzeigen \")),React.createElement(\"li\",{className:\"nav-item\"},React.createElement(\"button\",{style:{backgroundColor:'#d0d7de'},className:\"btn btn-sm\",\"aria-current\":\"page\",onClick:this.changeWeather},\"Wetterdaten anzeigen \")),React.createElement(\"li\",{className:\"nav-item\"},React.createElement(\"button\",{style:{backgroundColor:'#d0d7de'},className:\"btn btn-sm\",\"aria-current\":\"page\",onClick:this.changeMaen},\"Statistiken anzeigen\")),React.createElement(\"li\",{className:\"nav-item\"},React.createElement(\"button\",{style:{backgroundColor:'#d0d7de'},className:\"btn btn-sm\",\"aria-current\":\"page\",onClick:this.changeNewFormel},\"Formel Reifendruck anlegen \")),React.createElement(\"li\",{className:\"nav-item\"},React.createElement(\"button\",{style:{backgroundColor:'#d0d7de'},className:\"btn btn-sm\",\"aria-current\":\"page\",onClick:this.changeNewUser},\"Neues Mitglied anlegen \")),React.createElement(\"br\",null),React.createElement(\"li\",{className:\"nav-item\"},React.createElement(\"button\",{className:\"btn btn-primary btn-sm\",\"aria-current\":\"page\",onClick:this.changeLogout},\"Ausloggen \")))))),React.createElement(\"div\",{className:\"container\",style:{marginLeft:'auto',marginRight:'auto'}},React.createElement(\"br\",null),React.createElement(\"h1\",{className:\"display-4\",style:{color:'#d0d7de',textAlign:'center'}},\" Wetterdaten erfassen \"),React.createElement(\"br\",null)),React.createElement(View,{style:{flexDirection:'row',marginLeft:'auto',marginRight:'auto'}},React.createElement(\"div\",{style:{width:400}},React.createElement(\"br\",null),React.createElement(\"div\",{className:\"input-group\",style:{width:300,marginLeft:'auto',marginRight:'auto'}},React.createElement(\"label\",{className:\"input-group-text\",style:{backgroundColor:'#d0d7de'}},\" Rennen ausw\\xE4hlen: \\xA0 \",React.createElement(\"select\",{id:\"option\",value:this.state.id,onChange:this.getRaceID},optionTemplate))),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"div\",{className:\"input-group\",style:{width:300,marginLeft:'auto',marginRight:'auto'}},React.createElement(\"label\",{className:\"input-group-text\",style:{backgroundColor:'#d0d7de'}},\" N\\xE4chste Messung: \"),React.createElement(\"label\",{className:\"input-group-text\",style:{backgroundColor:'#f1f3f5'}},\" \",this.state.time,\" \")),React.createElement(\"br\",null),React.createElement(\"div\",{className:\"input-group\",style:{width:300,marginLeft:'auto',marginRight:'auto'}},React.createElement(\"label\",{className:\"input-group-text\",style:{backgroundColor:'#d0d7de',marginLeft:'auto',marginRight:'auto'}},\" Lufttemperatur: \"),React.createElement(\"input\",{type:\"text\",className:\"form-control\",\"aria-label\":\"Server\",onChange:function onChange(e){return _this5.setState({temp_air:e.target.value});},placeholder:\"xx.xx\"})),React.createElement(\"br\",null),React.createElement(\"div\",{className:\"input-group\",style:{width:300,marginLeft:'auto',marginRight:'auto'}},React.createElement(\"label\",{className:\"input-group-text\",style:{backgroundColor:'#d0d7de',marginLeft:'auto',marginRight:'auto'}},\" Streckentemperatur: \"),React.createElement(\"input\",{type:\"text\",className:\"form-control\",\"aria-label\":\"Server\",onChange:function onChange(e){return _this5.setState({temp_ground:e.target.value});},placeholder:\"xx.xx\"})),React.createElement(\"br\",null),React.createElement(\"div\",{className:\"input-group\",style:{width:300,marginLeft:'auto',marginRight:'auto'}},React.createElement(\"label\",{className:\"input-group-text\",style:{backgroundColor:'#d0d7de',marginLeft:'auto',marginRight:'auto'}},\"Streckenverh\\xE4ltnis:\"),React.createElement(\"input\",{type:\"text\",className:\"form-control\",\"aria-label\":\"Server\",value:this.state.weather_des,onChange:function onChange(e){return _this5.setState({weather_des:e.target.value});},placeholder:\"z.B. nass\"})),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"div\",{style:{marginLeft:100}},React.createElement(\"button\",{disabled:!this.validateForm(),type:\"button\",className:\"btn btn-primary\",onClick:this.handleSubmit,style:{marginLeft:'auto',marginRight:'auto'}},\"DATEN ABSPEICHERN\")),React.createElement(\"div\",{style:{marginLeft:150}},React.createElement(\"br\",null),React.createElement(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:this.changeRace},\" ZUR\\xDCCK\"),React.createElement(\"br\",null),React.createElement(\"br\",null))),React.createElement(\"div\",null,React.createElement(Table,{list:this.state.dataWeather}))));}}]);return NewHelpScreen;}(React.Component);export{NewHelpScreen as default};","map":{"version":3,"sources":["/home/toni/PycharmProjects/PropraSource/frontend/HelperScreen.js"],"names":["React","AsyncStorage","timeoutPromise","getWeatherTab","refreshToken","getRaceList","Table","image","NewHelpScreen","props","getRaceID","event","id","target","value","setItem","saveRaceIDinState","changeRace","preventDefault","getGroup","changeLogout","navigation","replace","changeNewUser","push","changeNewOrder","changeWeather","changeShowRace","changeWheel","changeNewFormel","changeAstrid","changeMaen","changeNewRace","handleSubmit","sendNewWeatherRequest","parseFloat","state","temp_air","temp_ground","weather_des","sleep","milliseconds","Promise","resolve","setTimeout","datetime","raceList","dataWeather","time","seconds","raceid","lastStemp","timer","startTimer","bind","countDown","ttemp","lastDate","Date","parse","getTime","nowDate","result","Math","floor","setState","clearInterval","secs","hours","divisor_for_minutes","minutes","divisor_for_seconds","ceil","toString","length","obj","setInterval","secondsToTime","getItem","getWeatherData","raceID","accesstoken","then","DataTabular","getSecondsToNextMeasurement","catch","error","console","log","timeLeftVar","racelistDropdown","e","group","fetch","method","headers","body","JSON","stringify","response","json","r","optionTemplate","map","v","name","overflowY","flex","backgroundColor","width","marginLeft","marginRight","color","textAlign","flexDirection","validateForm","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {\n    View,\n    Text,\n    Image,\n    TextInput,\n    TouchableHighlight,\n    SectionList,\n    TouchableOpacity,\n    ScrollView,\n} from 'react-native';\n\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport {Button} from \"react-native-web\";\n//import {Button, Text, TextInput, ToastAndroid, View} from \"react-native\";\n\nimport {timeoutPromise,getWeatherTab, refreshToken,getRaceList} from \"./tools\";\nimport Table from \"./Table\";\nimport image from \"./logo.png\";\n\nexport default class NewHelpScreen extends React.Component {\n  constructor(props) {\n\n    super(props);\n\n    this.state = {\n      temp_ground: 0.0,\n      temp_air: 0.0,\n      weather_des: \"\",\n      datetime: \"\",\n      raceList: [],\n      dataWeather: [],\n      time: '',\n      seconds: 0,\n      raceid:0,\n      lastStemp: '',\n    }\n\n    this.timer = 0;\n    this.startTimer = this.startTimer.bind(this);\n    this.countDown = this.countDown.bind(this);\n\n  }\n\n  getSecondsToNextMeasurement(ttemp) {\n\n    let lastDate = (new Date(Date.parse(ttemp.datetime)).getTime() / 1000)\n    let nowDate = (new Date().getTime() / 1000)\n    let result = 1800 - Math.floor(nowDate - lastDate)\n\n    if(result <= 0) {\n      this.setState({time: 'Jetzt fÃ¤llig!'})\n      clearInterval(this.timer)\n    }else {\n      this.setState({seconds: result})\n      this.startTimer()\n    }\n  }\n\n    secondsToTime(secs){\n\n        let hours = Math.floor(secs / (60 * 60));\n        let divisor_for_minutes = secs % (60 * 60);\n        let minutes = Math.floor(divisor_for_minutes / 60);\n        let divisor_for_seconds = divisor_for_minutes % 60;\n        let seconds = Math.ceil(divisor_for_seconds);\n\n        if(hours.toString().length == 1) {hours = `0${hours}`}\n        if(minutes.toString().length == 1) {minutes = `0${minutes}`}\n        if(seconds.toString().length == 1) {seconds = `0${seconds}`}\n\n        let obj = `${hours}:${minutes}:${seconds}`;\n        return obj\n\n    }\n\n    startTimer() {\n        if (this.timer == 0 && this.state.seconds > 0) {\n            this.timer = setInterval(this.countDown, 1000);\n        }\n\n    }\n    countDown() {\n        let seconds = this.state.seconds - 1;\n        this.setState({\n            time: this.secondsToTime(seconds),\n            seconds: seconds,\n            });\n      if (seconds == 0) {\n          clearInterval(this.timer);\n        }\n    }\n\n    async saveRaceIDinState(){\n        const id = await AsyncStorage.getItem(\"raceIDHelper\");\n        this.setState({raceid : id} );\n        this.getWeatherData(id);\n    }\n\n     getRaceID = event =>{\n        const id = event.target.value;\n        AsyncStorage.setItem(\"raceIDHelper\",event.target.value);\n        this.saveRaceIDinState();\n    }\n\n\n    async getWeatherData(raceID){\n       const accesstoken = await AsyncStorage.getItem('accesstoken');\n       getWeatherTab(accesstoken, raceID).then(DataTabular => {\n                this.setState({dataWeather: DataTabular});\n                this.setState({lastStemp: this.state.dataWeather[this.state.dataWeather.length-1]})\n                if(this.state.lastStemp != null) {\n                  this.getSecondsToNextMeasurement(this.state.lastStemp)\n                }else {\n                  clearInterval(this.timer)\n                  this.timer = 0;\n                  this.setState({time: '00:00:00'})\n                }\n            }).catch(function (error) {\n                console.log(error);\n            })\n    }\n\n    async componentDidMount() {\n\n        let timeLeftVar = this.secondsToTime(this.state.seconds);\n\n        this.setState({ time: timeLeftVar });\n\n        const accesstoken = await AsyncStorage.getItem('accesstoken');\n\n        getRaceList(accesstoken).then(racelistDropdown => {\n          this.setState({raceList: racelistDropdown});\n          try {\n            this.setState({raceid: racelistDropdown[0].id})\n\n          }catch(e) {\n            console.log(e);\n          }\n        }).catch(function (error) {\n            console.log(error);\n        });\n\n\n        try {\n          this.getWeatherData(1)\n        }catch(e) {\n          console.log(\"Couldnt get WeatherData for RaceId 1\")\n        }\n\n        }\n\n    async getGroup(){\n         const group = await AsyncStorage.getItem(\"usergroup\");\n         console.log(group)\n        if (group===\"Helper\"){\n            this.props.navigation.push(\"HelperNavigator\")\n        }\n        if (group===\"Ingenieur\"){\n            this.props.navigation.push(\"Nav\")\n        }\n        if (group===\"Manager\"){\n            this.props.navigation.push(\"Race\")\n        }\n    }\n\n    changeRace = event => {\n        event.preventDefault();\n        this.getGroup();\n    }\n\n        changeLogout = event => {\n        event.preventDefault();\n        this.props.navigation.replace('Logout');\n    }\n\n     changeNewUser = event => {\n        event.preventDefault();\n        this.props.navigation.push('NewUser');\n    }\n\n    changeNewOrder = event => {\n        event.preventDefault();\n        this.props.navigation.push('NewOrder');\n    }\n\n    changeWeather = event => {\n        event.preventDefault();\n        this.props.navigation.push('Weather');\n    }\n\n    changeShowRace = event => {\n        event.preventDefault();\n        this.props.navigation.push('ShowRace');\n    }\n\n     changeWheel = event => {\n        event.preventDefault();\n        this.props.navigation.push('Wheel');\n    }\n\n    changeNewFormel = event => {\n        event.preventDefault();\n        this.props.navigation.push('NewFormel');\n    }\n\n    changeAstrid = event => {\n        event.preventDefault();\n        this.props.navigation.push('Astrid');\n    }\n\n    changeMaen = event => {\n        event.preventDefault();\n        this.props.navigation.push('Maen');\n    }\n\n    changeNewRace = event => {\n        event.preventDefault();\n        this.props.navigation.push('NewRace')\n    }\n\n    changeLogout = event => {\n        event.preventDefault();\n        this.props.navigation.replace('Logout');\n    }\n\n    validateForm() {\n        return this.state.weather_des.length > 0 && this.state.raceid != 0 ;\n    }\n\n    handleSubmit = event => {\n        event.preventDefault();\n        this.sendNewWeatherRequest(parseFloat(this.state.temp_air),parseFloat(this.state.temp_ground),this.state.weather_des);\n    }\n\n    sleep = (milliseconds) => {\n      return new Promise(resolve => setTimeout(resolve, milliseconds))\n  }\n\n    async sendNewWeatherRequest(temp_air,temp_ground,weather_des) {\n      const id = await AsyncStorage.getItem(\"raceIDHelper\");\n       timeoutPromise(2000, fetch(\n            'https://api.race24.cloud/user/weather/create', {\n                method: 'POST',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    raceID:id,\n                    temp_air: parseFloat(temp_air),\n                    temp_ground: parseFloat(temp_ground),\n                    weather_des: weather_des,\n                })\n            })\n            ).then(response => response.json()).then(\n                console.log(\"success\")\n                ).catch(function (error) {\n                console.log('error');\n            })\n\n            this.sleep(2500).then(r => {\n              console.log(\"weather saved!\");\n              this.getWeatherData(this.state.raceid);\n      \t    })\n    }\n\n\n    render() {\n        let optionTemplate = this.state.raceList.map(v => (\n            <option value={v.id} key={v.id}>{v.name}</option>\n    ));\n\n        return (\n          <View style={{overflowY: 'scroll', flex: 1, backgroundColor: '#2e3742'}}>\n                <nav className=\"navbar navbar-light\" style={{backgroundColor: '#d0d7de'}}>\n                    <div className=\"container-fluid\">\n                        <a className=\"navbar-brand\" href=\"#\"> <img src={image} style={{width: '70%'}}/> </a>\n                        <button className=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\"\n                                data-bs-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\"\n                                aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n                            <span className=\"navbar-toggler-icon\"></span>\n                        </button>\n                        <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n                            <ul className=\"navbar-nav me-auto mb-2 mb-lg-0\">\n                                <li className=\"nav-item\">\n                                    <button style={{backgroundColor: '#d0d7de'}} className=\"btn btn-sm\" aria-current=\"page\" onClick={this.changeRace}>HauptmenÃ¼ </button>\n                                </li>\n                                <li className=\"nav-item\">\n                                    <button style={{backgroundColor: '#d0d7de'}} className=\"btn btn-sm\" aria-current=\"page\" onClick={this.changeNewRace}>Neue Renndaten anlegen </button>\n                                </li>\n                                <li className=\"nav-item\">\n                                    <button style={{backgroundColor: '#d0d7de'}} className=\"btn btn-sm\" aria-current=\"page\" onClick={this.changeShowRace}>Renndaten anzeigen </button>\n                                </li>\n                                <li className=\"nav-item\">\n                                    <button style={{backgroundColor: '#d0d7de'}} className=\"btn btn-sm\" aria-current=\"page\" onClick={this.changeNewOrder}>Reifenbestellungen verwalten </button>\n                                </li>\n                                <li className=\"nav-item\">\n                                    <button style={{backgroundColor: '#d0d7de'}} className=\"btn btn-sm\" aria-current=\"page\" onClick={this.changeAstrid}>Berechnung Reifendruck </button>\n                                </li>\n                                <li className=\"nav-item\">\n                                    <button style={{backgroundColor: '#d0d7de'}} className=\"btn btn-sm\" aria-current=\"page\" onClick={this.changeWheel}>Reifendetails anzeigen </button>\n                                </li>\n                                <li className=\"nav-item\">\n                                    <button style={{backgroundColor: '#d0d7de'}} className=\"btn btn-sm\" aria-current=\"page\" onClick={this.changeWeather}>Wetterdaten anzeigen </button>\n                                </li>\n                                <li className=\"nav-item\">\n                                    <button style={{backgroundColor: '#d0d7de'}} className=\"btn btn-sm\" aria-current=\"page\" onClick={this.changeMaen}>Statistiken anzeigen</button>\n                                </li>\n                                <li className=\"nav-item\">\n                                    <button style={{backgroundColor: '#d0d7de'}} className=\"btn btn-sm\" aria-current=\"page\" onClick={this.changeNewFormel}>Formel Reifendruck anlegen </button>\n                                </li>\n                                <li className=\"nav-item\">\n                                    <button style={{backgroundColor: '#d0d7de'}} className=\"btn btn-sm\" aria-current=\"page\" onClick={this.changeNewUser}>Neues Mitglied anlegen </button>\n                                </li>\n                                <br/>\n                                <li className=\"nav-item\">\n                                    <button className=\"btn btn-primary btn-sm\" aria-current=\"page\" onClick={this.changeLogout}>Ausloggen </button>\n                                </li>\n                            </ul>\n                        </div>\n                    </div>\n                </nav>\n              <div className='container' style={{marginLeft: 'auto', marginRight: 'auto'}}>\n              <br/>\n              <h1 className=\"display-4\" style={{color: '#d0d7de', textAlign: 'center'}}> Wetterdaten erfassen </h1>\n              <br/>\n              </div>\n              <View style={{flexDirection: 'row', marginLeft: 'auto', marginRight: 'auto'}}>\n              <div style={{width: 400}}>\n              <br/>\n              <div className='input-group' style={{width: 300, marginLeft: 'auto', marginRight: 'auto'}}>\n                    <label className='input-group-text' style={{backgroundColor: '#d0d7de'}}> Rennen auswÃ¤hlen: &nbsp; <select\n                        id='option' value={this.state.id} onChange={this.getRaceID}>\n                        {optionTemplate}\n                    </select>\n                    </label>\n              </div>\n              <br/>\n              <br/>\n              <div className='input-group' style={{width: 300, marginLeft: 'auto', marginRight: 'auto'}}>\n                    <label className='input-group-text' style={{backgroundColor: '#d0d7de'}}> NÃ¤chste Messung: </label>\n                    <label className='input-group-text' style={{backgroundColor: '#f1f3f5'}}> {this.state.time} </label>\n              </div>\n              <br/>\n              <div className='input-group' style={{width: 300, marginLeft: 'auto', marginRight: 'auto'}}>\n                    <label className='input-group-text' style={{backgroundColor: '#d0d7de', marginLeft: 'auto', marginRight: 'auto'}}> Lufttemperatur: </label>\n                    <input type='text' className='form-control' aria-label='Server'\n                           onChange={(e) => this.setState({temp_air:e.target.value})} placeholder='xx.xx'/>\n                </div>\n                <br/>\n                  <div className='input-group' style={{width: 300, marginLeft: 'auto', marginRight: 'auto'}}>\n                    <label className='input-group-text' style={{backgroundColor: '#d0d7de', marginLeft: 'auto', marginRight: 'auto'}}> Streckentemperatur: </label>\n                    <input type='text' className='form-control' aria-label='Server'\n                           onChange={(e) => this.setState({temp_ground:e.target.value})} placeholder='xx.xx'/>\n                </div>\n                <br/>\n                <div className='input-group' style={{width: 300, marginLeft: 'auto', marginRight: 'auto'}}>\n                    <label className='input-group-text' style={{backgroundColor: '#d0d7de', marginLeft: 'auto', marginRight: 'auto'}}>StreckenverhÃ¤ltnis:</label>\n                    <input type='text' className='form-control' aria-label='Server' value={this.state.weather_des}\n                           onChange={(e) => this.setState({weather_des:e.target.value})} placeholder=\"z.B. nass\"/>\n                </div>\n                <br/>\n                <br/>\n                <div style={{marginLeft: 100}}>\n              <button  disabled={!this.validateForm()} type='button' className='btn btn-primary' onClick={this.handleSubmit} style={{marginLeft: 'auto', marginRight: 'auto'}}>\n              DATEN ABSPEICHERN\n              </button>\n                </div>\n                <div style={{marginLeft: 150}}>\n                    <br/>\n                <button type='button' className='btn btn-primary'\n                        onClick={this.changeRace}> ZURÃCK\n                </button>\n                <br/>\n                <br/>\n                </div>\n                </div>\n\n            <div>\n\n              <Table list={this.state.dataWeather}/>\n            </div>\n            </View>\n            </View>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}