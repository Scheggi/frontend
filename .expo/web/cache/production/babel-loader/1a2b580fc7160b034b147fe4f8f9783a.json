{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}import React from\"react\";import Button from\"react-native-web/dist/exports/Button\";import Text from\"react-native-web/dist/exports/Text\";import TextInput from\"react-native-web/dist/exports/TextInput\";import ToastAndroid from\"react-native-web/dist/exports/ToastAndroid\";import View from\"react-native-web/dist/exports/View\";import{styles}from\"./styles\";import AsyncStorage from'@react-native-async-storage/async-storage';import{timeoutPromise,refreshToken,syncData,getRaceList,getFormelList}from\"./tools\";var FormelScreen=function(_React$Component){_inherits(FormelScreen,_React$Component);var _super=_createSuper(FormelScreen);function FormelScreen(props){var _this;_classCallCheck(this,FormelScreen);_this=_super.call(this,props);_this.changeRace=function(event){event.preventDefault();_this.props.navigation.goBack();};_this.handleSubmit=function(event){event.preventDefault();_this.sendNewFormelRequest(_this.state.formel);};_this.state={list_formel:[],formel:\"\"};return _this;}_createClass(FormelScreen,[{key:\"validateForm\",value:function validateForm(){return this.state.formel.length>0;}},{key:\"sendNewFormelRequest\",value:function sendNewFormelRequest(formel){var _this2=this;return _regeneratorRuntime.async(function sendNewFormelRequest$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(formel);timeoutPromise(2000,fetch('https://api.race24.cloud/formel/create',{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({formel:formel})})).then(function(response){return response.json();}).then(function(data){if(data[1]==200){_this2.getTabularData();}else{console.log(\"failed\");}}).catch(function(error){console.log(error);});case 2:case\"end\":return _context.stop();}}},null,null,null,Promise);}},{key:\"getTabularData\",value:function getTabularData(){var _this3=this;var accesstoken;return _regeneratorRuntime.async(function getTabularData$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _regeneratorRuntime.awrap(AsyncStorage.getItem('accesstoken'));case 2:accesstoken=_context2.sent;getFormelList(accesstoken).then(function(formellistTab){console.log(formellistTab);_this3.setState({list_formel:formellistTab});}).catch(function(error){console.log(error);});case 4:case\"end\":return _context2.stop();}}},null,null,null,Promise);}},{key:\"componentDidMount\",value:function componentDidMount(){return _regeneratorRuntime.async(function componentDidMount$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _regeneratorRuntime.awrap(this.getTabularData());case 2:case\"end\":return _context3.stop();}}},null,this,null,Promise);}},{key:\"renderTableData\",value:function renderTableData(){console.log(this.state.list_formel);return this.state.list_formel.map(function(list_formel,index){var n=list_formel.n,formel=list_formel.formel;return React.createElement(\"tr\",{bgcolor:\"#696969\",style:{textAlign:\"left\",padding:'8px',color:'white',fontFamily:'arial'},key:n},React.createElement(\"td\",{style:{border:\"solid\",borderColor:'dimgrey',height:20,width:100,padding:'8px'}},n),React.createElement(\"td\",{style:{border:\"solid\",borderColor:'dimgrey',height:20,width:150,padding:'8px'}},formel));});}},{key:\"render\",value:function render(){var _this4=this;return React.createElement(View,{style:viewStyles1},React.createElement(Text,{style:styles.textStyles},\"Formel Reifendruck anlegen\"),React.createElement(Text,{style:{height:30}}),React.createElement(View,null,React.createElement(TextInput,{style:{fontfamily:'arial',height:30,width:500,textAlign:'center',backgroundColor:'#d3d3d3'},placeholder:\"Formel hier eingeben\",onChangeText:function onChangeText(text){return _this4.setState({formel:text});}}),React.createElement(Text,{style:{height:20}})),React.createElement(View,null,React.createElement(Button,{disabled:!this.validateForm(),title:\"Formel anlegen\",onPress:this.handleSubmit}),React.createElement(Text,{style:{height:20}})),React.createElement(\"div\",null,React.createElement(\"h1\",{style:{fontsize:30,fontFamily:'arial'},id:\"title\"},\"Angelegte Formeln\"),React.createElement(\"table\",{id:\"list_formel\"},React.createElement(\"tbody\",null,this.renderTableData()))),React.createElement(View,{style:{width:200}},React.createElement(Text,{style:{height:20}}),React.createElement(Button,{title:\"zur\\xFCck\",onPress:this.changeRace})));}}]);return FormelScreen;}(React.Component);export{FormelScreen as default};var viewStyles1={flex:1,alignItems:'center',justifyContent:'center',fontFamily:'arial',overflowY:'scroll'};","map":{"version":3,"sources":["/home/toni/PycharmProjects/PropraSource/frontend/FormelScreen.js"],"names":["React","styles","AsyncStorage","timeoutPromise","refreshToken","syncData","getRaceList","getFormelList","FormelScreen","props","changeRace","event","preventDefault","navigation","goBack","handleSubmit","sendNewFormelRequest","state","formel","list_formel","length","console","log","fetch","method","headers","body","JSON","stringify","then","response","json","data","getTabularData","catch","error","getItem","accesstoken","formellistTab","setState","map","index","n","textAlign","padding","color","fontFamily","border","borderColor","height","width","viewStyles1","textStyles","fontfamily","backgroundColor","text","validateForm","fontsize","renderTableData","Component","flex","alignItems","justifyContent","overflowY"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {Button, Text, TextInput, ToastAndroid, View} from \"react-native\";\nimport {styles} from \"./styles\"\n//import { AsyncStorage } from 'react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport {timeoutPromise, refreshToken, syncData, getRaceList,getFormelList} from \"./tools\";\n\nexport default class FormelScreen extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            list_formel:[],\n            formel:\"\",\n        }\n    }\n\n    changeRace = event => {\n        event.preventDefault();\n        this.props.navigation.goBack();\n    }\n\n    validateForm() {\n        return this.state.formel.length > 0 ;\n    }\n    handleSubmit = event => {\n        event.preventDefault();\n        this.sendNewFormelRequest(this.state.formel);\n    }\n\n    async sendNewFormelRequest(formel) {\n        console.log(formel)\n       timeoutPromise(2000, fetch(\n            'https://api.race24.cloud/formel/create', {\n                method: 'POST',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    formel:formel,\n                })\n            })\n            ).then(response => response.json()).then(data => {\n                if (data[1]==200) {\n                    this.getTabularData()\n                }\n                else {\n                    console.log(\"failed\")\n                }\n            }).catch(function (error) {\n                console.log(error);\n            })\n    }\n\n    async getTabularData(){\n        const accesstoken = await AsyncStorage.getItem('accesstoken');\n        getFormelList(accesstoken).then(formellistTab => {\n            console.log(formellistTab);\n            this.setState({list_formel: formellistTab});\n        }).catch(function (error) {\n            console.log(error);\n        })\n    }\n\n    async componentDidMount() {\n        await this.getTabularData()\n    }\n\n    /*\n    async componentDidMount() {\n      const accesstoken = await AsyncStorage.getItem('accesstoken');\n      timeoutPromise(2000, fetch(\"https://api.race24.cloud/formel/get\", {\n          method: 'POST',\n          headers: {\n              'Accept': 'application/json',\n              'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n              access_token: accesstoken,\n          })\n          })).then(response => response.json()).then(data => {\n              console.log(data);\n              this.setState({list_formel: data[0].data})\n          })\n    }\n\n     */\n\n    renderTableData() {\n        console.log(this.state.list_formel)\n        return this.state.list_formel.map((list_formel, index) => {\n            const { n, formel } =list_formel //destructuring\n            return (\n            <tr bgcolor='#696969' style={{textAlign: \"left\", padding: '8px', color: 'white', fontFamily: 'arial'}} key={n}>\n               <td style={{border: \"solid\", borderColor: 'dimgrey', height: 20, width: 100, padding: '8px'}} >{n}</td>\n               <td style={{border: \"solid\", borderColor: 'dimgrey', height: 20, width: 150, padding: '8px'}} >{formel}</td>\n            </tr>\n         )\n      })\n   }\n\n    render() {\n        return (\n            <View style={viewStyles1}>\n                <Text style={styles.textStyles}>\n                    Formel Reifendruck anlegen\n                </Text>\n                 <Text style={{height:30}}>\n                </Text>\n                <View>\n                    <TextInput\n                        style={{fontfamily: 'arial', height: 30, width: 500, textAlign: 'center', backgroundColor: '#d3d3d3'}}\n                        placeholder=\"Formel hier eingeben\"\n                        onChangeText={(text) => this.setState({formel:text})}\n                    />\n                    <Text style={{height: 20}}></Text>\n                </View>\n                <View>\n                    <Button\n                        disabled={!this.validateForm()}\n                        title=\"Formel anlegen\"\n                        onPress={this.handleSubmit}\n                    />\n                    <Text style={{height: 20}}></Text>\n                </View>\n                <div>\n                <h1 style={{fontsize: 30, fontFamily: 'arial'}} id='title'>Angelegte Formeln</h1>\n                <table  id='list_formel'>\n                   <tbody>\n                      {this.renderTableData()}\n                   </tbody>\n                </table>\n                </div>\n                <View  style={{width: 200}}>\n                 <Text style={{height: 20}}></Text>\n                <Button\n                        title=\"zurück\"\n                        onPress={this.changeRace}\n                />\n                </View>\n            </View>\n        );\n    }\n}\n\nconst viewStyles1= {\n        flex: 1,\n        alignItems: 'center',\n        justifyContent: 'center',\n        fontFamily: 'arial',\n        overflowY: 'scroll',\n    };"]},"metadata":{},"sourceType":"module"}