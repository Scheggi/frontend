{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}import React from\"react\";import TextInput from\"react-native-web/dist/exports/TextInput\";import Button from\"react-native-web/dist/exports/Button\";import View from\"react-native-web/dist/exports/View\";import{styles}from\"./styles\";import AsyncStorage from'@react-native-async-storage/async-storage';import{timeoutPromise}from\"./tools\";import Text from\"react-native-web/dist/vendor/react-native/Animated/components/AnimatedText\";var LogoutScreen=function(_React$Component){_inherits(LogoutScreen,_React$Component);var _super=_createSuper(LogoutScreen);function LogoutScreen(props){var _this;_classCallCheck(this,LogoutScreen);_this=_super.call(this,props);_this.state={username:\"\"};return _this;}_createClass(LogoutScreen,[{key:\"sendLogoutRequest\",value:function sendLogoutRequest(){var _this2=this;var accesstoken;return _regeneratorRuntime.async(function sendLogoutRequest$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"Logout\");_context.next=3;return _regeneratorRuntime.awrap(AsyncStorage.getItem('accesstoken'));case 3:accesstoken=_context.sent;timeoutPromise(2000,fetch('https://api.race24.cloud/user/auth/logout',{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({access_token:accesstoken})})).then(function(response){return response.json();}).then(function(data){if(data[1]==200){AsyncStorage.clear();_this2.props.navigation.navigate('AppNavigator',{screen:\"Splash\"});}else{console.log(\"Logout failed\");}}).catch(function(error){console.log(error);});case 5:case\"end\":return _context.stop();}}},null,null,null,Promise);}},{key:\"componentDidMount\",value:function componentDidMount(){this.sendLogoutRequest();}},{key:\"render\",value:function render(){return React.createElement(View,{style:styles.viewStyles},React.createElement(Text,{style:styles.textStyles},\" Sie wurden erfolgreich ausgeloggt!\"));}}]);return LogoutScreen;}(React.Component);export{LogoutScreen as default};","map":{"version":3,"sources":["/home/toni/PycharmProjects/PropraSource/frontend/LogoutScreen.js"],"names":["React","styles","AsyncStorage","timeoutPromise","Text","LogoutScreen","props","state","username","console","log","getItem","accesstoken","fetch","method","headers","body","JSON","stringify","access_token","then","response","json","data","clear","navigation","navigate","screen","catch","error","sendLogoutRequest","viewStyles","textStyles","Component"],"mappings":"ikCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,C,6KAEA,OAAQC,MAAR,gBACA,MAAOC,CAAAA,YAAP,KAAyB,2CAAzB,CACA,OAAQC,cAAR,eACA,MAAOC,CAAAA,IAAP,KAAiB,4EAAjB,C,GAIqBC,CAAAA,Y,2GACjB,sBAAYC,KAAZ,CAAmB,8CACf,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACTC,QAAQ,CAAE,EADD,CAAb,CAFe,aAKlB,C,0DAED,wLACIC,OAAO,CAACC,GAAR,CAAY,QAAZ,EADJ,iDAE8BR,YAAY,CAACS,OAAb,CAAqB,YAArB,CAF9B,SAEUC,WAFV,eAGGT,cAAc,CAAC,IAAD,CAAOU,KAAK,CACrB,2CADqB,CACwB,CACzCC,MAAM,CAAE,MADiC,CAEzCC,OAAO,CAAE,CACL,SAAU,kBADL,CAEL,eAAgB,kBAFX,CAFgC,CAM1CC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACjBC,YAAY,CAAEP,WADG,CAAf,CANoC,CADxB,CAAZ,CAAd,CAWOQ,IAXP,CAWY,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAT,EAAJ,EAXpB,EAWyCF,IAXzC,CAW8C,SAAAG,IAAI,CAAI,CAC7C,GAAIA,IAAI,CAAC,CAAD,CAAJ,EAAS,GAAb,CAAkB,CACdrB,YAAY,CAACsB,KAAb,GACA,MAAI,CAAClB,KAAL,CAAWmB,UAAX,CAAsBC,QAAtB,CAA+B,cAA/B,CAA8C,CAACC,MAAM,CAAE,QAAT,CAA9C,EAEH,CAJD,IAKK,CACDlB,OAAO,CAACC,GAAR,CAAY,eAAZ,EAGH,CACJ,CAtBN,EAsBQkB,KAtBR,CAsBc,SAAUC,KAAV,CAAiB,CACtBpB,OAAO,CAACC,GAAR,CAAYmB,KAAZ,EACH,CAxBN,EAHH,qE,iCA8BA,4BAAoB,CAChB,KAAKC,iBAAL,GACH,C,sBAED,iBAAS,CACL,MACI,qBAAC,IAAD,EAAM,KAAK,CAAE7B,MAAM,CAAC8B,UAApB,EACI,oBAAC,IAAD,EAAM,KAAK,CAAE9B,MAAM,CAAC+B,UAApB,wCADJ,CADJ,CAKH,C,0BAhDqChC,KAAK,CAACiC,S,SAA3B5B,Y","sourcesContent":["import React from \"react\";\nimport {TextInput, Button, View} from \"react-native\";\nimport {styles} from \"./styles\"\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport {timeoutPromise} from \"./tools\"\nimport Text from \"react-native-web/dist/vendor/react-native/Animated/components/AnimatedText\";\n\n\n\nexport default class LogoutScreen extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            username: \"\",\n        };\n    }\n\n    async sendLogoutRequest() {\n        console.log(\"Logout\")\n        const accesstoken = await AsyncStorage.getItem('accesstoken');\n       timeoutPromise(2000, fetch(\n            'https://api.race24.cloud/user/auth/logout', {\n                method: 'POST',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json',\n                },\n               body: JSON.stringify({\n                   access_token: accesstoken,\n               })\n            })\n            ).then(response => response.json()).then(data => {\n                if (data[1]==200) {\n                    AsyncStorage.clear()\n                    this.props.navigation.navigate('AppNavigator',{screen: \"Splash\"});\n\n                }\n                else {\n                    console.log(\"Logout failed\")\n                    //AsyncStorage.clear()\n                    //this.props.navigation.replace(\"Race\")\n                }\n            }).catch(function (error) {\n                console.log(error);\n            })\n    }\n\n    componentDidMount() {\n        this.sendLogoutRequest()\n    }\n\n    render() {\n        return (\n            <View style={styles.viewStyles}>\n                <Text style={styles.textStyles}> Sie wurden erfolgreich ausgeloggt!</Text>\n            </View>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}