{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}import React from\"react\";import TextInput from\"react-native-web/dist/exports/TextInput\";import Button from\"react-native-web/dist/exports/Button\";import View from\"react-native-web/dist/exports/View\";import{styles}from\"./styles\";import AsyncStorage from'@react-native-async-storage/async-storage';import{timeoutPromise}from\"./tools\";import Text from\"react-native-web/dist/vendor/react-native/Animated/components/AnimatedText\";var LoginScreen=function(_React$Component){_inherits(LoginScreen,_React$Component);var _super=_createSuper(LoginScreen);function LoginScreen(props){var _this;_classCallCheck(this,LoginScreen);_this=_super.call(this,props);_this.handleSubmit=function(event){event.preventDefault();_this.sendLoginRequest(_this.state.username,_this.state.password);};_this.state={username:\"\",password:\"\"};return _this;}_createClass(LoginScreen,[{key:\"validateForm\",value:function validateForm(){return this.state.username.length>0&&this.state.password.length>0;}},{key:\"sendLoginRequest\",value:function sendLoginRequest(username,password){var _this2=this;return _regeneratorRuntime.async(function sendLoginRequest$(_context){while(1){switch(_context.prev=_context.next){case 0:timeoutPromise(2000,fetch('https://api.race24.cloud/user/auth/login',{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({username:username,password:password})})).then(function(response){return response.json();}).then(function(data){if(data[1]==200){AsyncStorage.setItem('accesstoken',String(data[0].access_token));AsyncStorage.setItem('refreshtoken',String(data[0].refresh_token));AsyncStorage.setItem('userid',String(data[0].userid));AsyncStorage.setItem('usergroup',String(data[0].usergroup));console.log(data[0].usergroup);_this2.props.navigation.replace('Splash');}else{console.log(\"Login failed\");}}).catch(function(error){console.log(error);});case 1:case\"end\":return _context.stop();}}},null,null,null,Promise);}},{key:\"render\",value:function render(){var _this3=this;return React.createElement(View,{style:styles.viewStyles},React.createElement(Text,{style:styles.textStyles},\"  Reifenmanagement\"),React.createElement(View,null,React.createElement(Text,{style:{height:50}},\" \"),React.createElement(\"table\",null,React.createElement(\"tr\",null,React.createElement(\"td\",{bgcolor:\"#696969\",style:{textAlign:\"left\",padding:'8px',color:'white'}},React.createElement(\"label\",null,\" Username eingeben: \")),React.createElement(\"td\",{style:{border:\"solid\",borderColor:'dimgrey',height:20,width:150,padding:'8px'}},React.createElement(TextInput,{value:this.state.type,onChangeText:function onChangeText(username){return _this3.setState({username:username});},placeholder:\"Username\"}))),React.createElement(\"tr\",{style:{height:20}},\" \"),React.createElement(\"tr\",null,React.createElement(\"td\",{bgcolor:\"#696969\",style:{textAlign:\"left\",padding:'8px',color:'white'}},React.createElement(\"label\",null,\" Passwort eingeben: \")),React.createElement(\"td\",{style:{border:\"solid\",borderColor:'dimgrey',height:20,width:150,padding:'8px'}},\" \",React.createElement(TextInput,{value:this.state.place,secureTextEntry:true,onChangeText:function onChangeText(password){return _this3.setState({password:password});},placeholder:\"Passwort\"})))),React.createElement(View,{style:{marginLeft:'auto',marginRight:'auto',width:200}},React.createElement(\"text\",{style:{height:40}}),React.createElement(Button,{disabled:!this.validateForm(),title:\"Login\",onPress:this.handleSubmit}))));}}]);return LoginScreen;}(React.Component);export{LoginScreen as default};","map":{"version":3,"sources":["/home/toni/PycharmProjects/PropraSource/frontend/Login.js"],"names":["React","styles","AsyncStorage","timeoutPromise","Text","LoginScreen","props","handleSubmit","event","preventDefault","sendLoginRequest","state","username","password","length","fetch","method","headers","body","JSON","stringify","then","response","json","data","setItem","String","access_token","refresh_token","userid","usergroup","console","log","navigation","replace","catch","error","viewStyles","textStyles","height","textAlign","padding","color","border","borderColor","width","type","setState","place","marginLeft","marginRight","validateForm","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport {TextInput, Button, View} from \"react-native\";\r\nimport {styles} from \"./styles\"\r\n//import { AsyncStorage } from 'react-native';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport {timeoutPromise} from \"./tools\"\r\nimport Text from \"react-native-web/dist/vendor/react-native/Animated/components/AnimatedText\";\r\n\r\n\r\n\r\nexport default class LoginScreen extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            username: \"\",\r\n            password: \"\"\r\n        };\r\n    }\r\n    validateForm() {\r\n        return this.state.username.length > 0 && this.state.password.length > 0;\r\n    }\r\n    handleSubmit = event => {\r\n        event.preventDefault();\r\n        this.sendLoginRequest(this.state.username, this.state.password);\r\n    }\r\n\r\n\r\n    async sendLoginRequest(username, password) {\r\n       timeoutPromise(2000, fetch(\r\n            'https://api.race24.cloud/user/auth/login', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Accept': 'application/json',\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({\r\n                    username: username,\r\n                    password: password,\r\n                })\r\n            })\r\n            ).then(response => response.json()).then(data => {\r\n                if (data[1]==200) {\r\n                    AsyncStorage.setItem('accesstoken', String(data[0].access_token));\r\n                    AsyncStorage.setItem('refreshtoken', String(data[0].refresh_token));\r\n                    AsyncStorage.setItem('userid', String(data[0].userid));\r\n                    AsyncStorage.setItem('usergroup',String(data[0].usergroup));\r\n                    console.log(data[0].usergroup)\r\n                    this.props.navigation.replace('Splash');\r\n\r\n                }\r\n                else {\r\n                    console.log(\"Login failed\")\r\n                }\r\n            }).catch(function (error) {\r\n                console.log(error);\r\n            })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <View style={styles.viewStyles}>\r\n                <Text style={styles.textStyles}>  Reifenmanagement</Text>\r\n                <View >\r\n                    <Text style={{height: 50}}> </Text>\r\n                    <table>\r\n                    <tr>\r\n                        <td bgcolor='#696969' style={{textAlign: \"left\", padding: '8px', color: 'white'}}><label> Username eingeben: </label></td>\r\n                        <td style={{border: \"solid\", borderColor: 'dimgrey', height: 20, width: 150, padding: '8px'}}><TextInput value={this.state.type}\r\n                                   onChangeText={(username) => this.setState({username})} placeholder='Username'/></td>\r\n                    </tr>\r\n                     <tr style={{height: 20}}> </tr>\r\n                    <tr>\r\n                        <td bgcolor='#696969' style={{textAlign: \"left\", padding: '8px', color: 'white'}}><label> Passwort eingeben: </label></td>\r\n                        <td style={{border: \"solid\", borderColor: 'dimgrey', height: 20, width: 150, padding: '8px'}}> <TextInput value={this.state.place}\r\n                                    secureTextEntry={true} onChangeText={(password) => this.setState({password})} placeholder='Passwort'/>\r\n                        </td>\r\n                    </tr>\r\n                    </table>\r\n                    <View style={{marginLeft: 'auto', marginRight: 'auto', width: 200}}>\r\n                         <text style={{height: 40}}></text>\r\n                    <Button\r\n                        disabled={!this.validateForm()}\r\n                        title=\"Login\"\r\n                        onPress={this.handleSubmit}\r\n                    />\r\n                    </View>\r\n                </View>\r\n            </View>\r\n        );\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}