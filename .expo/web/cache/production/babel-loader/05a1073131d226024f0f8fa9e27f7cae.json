{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import AsyncStorage from'@react-native-async-storage/async-storage';import{createKeyboardAwareNavigator}from\"react-navigation\";function generateAllSets(raceID,set,cat,subcat,numberOfSets){for(var i=1;i<parseInt(numberOfSets)+1;i++){console.log(i);generateNewWheelSet(raceID,i,cat,subcat);}}function generateNewWheelSet(raceID,setNr,cat,subcat){var cols,i;return _regeneratorRuntime.async(function generateNewWheelSet$(_context){while(1){switch(_context.prev=_context.next){case 0:cols=[];i=0;case 2:if(!(i<4)){_context.next=8;break;}_context.next=5;return _regeneratorRuntime.awrap(sendWheelRequest(0,'','').then(function(Data){console.log(Data);cols.push(Data);}).catch(function(error){console.log(error);}));case 5:i++;_context.next=2;break;case 8:console.log(cols);_context.next=11;return _regeneratorRuntime.awrap(sendWheelsRequest(parseInt(cols[0]),parseInt(cols[1]),parseInt(cols[2]),parseInt(cols[3]),'').then(function(Data){console.log(Data);cols.push(Data);}).catch(function(error){console.log(error);}));case 11:console.debug(cols[4]);sendNewSetRequest(raceID,setNr,cat,subcat,cols[4]);case 13:case\"end\":return _context.stop();}}},null,null,null,Promise);}function sendWheelRequest(accestoken){var air_press,id_scan,id,_args2=arguments;return _regeneratorRuntime.async(function sendWheelRequest$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:air_press=_args2.length>1&&_args2[1]!==undefined?_args2[1]:0;id_scan=_args2.length>2&&_args2[2]!==undefined?_args2[2]:'';id=_args2.length>3&&_args2[3]!==undefined?_args2[3]:'';_context2.next=5;return _regeneratorRuntime.awrap(timeoutPromise(2000,fetch('https://api.race24.cloud/wheel_cont/createWheel',{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({aceess_tolen:accestoken,air_press:air_press,id_scan:id_scan,id:id})})).then(function(response){return response.json();}).then(function(data){if(\"msg\"in data){if(data[\"msg\"]===\"Token has expired\"){refreshToken().then(function(token){sendWheelRequest(accestoken,air_press,id_scan,id);}).catch(function(error){console.log(\"Refresh failed\");console.log(error);});return[];}}else{console.log(\"Return Data\");console.log(data[0].id);return data[0].id;}return[];}).catch(function(error){console.log(error);return[];}));case 5:return _context2.abrupt(\"return\",_context2.sent);case 6:case\"end\":return _context2.stop();}}},null,null,null,Promise);}function sendWheelsRequest(accestoken,id_FL,id_FR,id_BL,id_BR){var id,_args3=arguments;return _regeneratorRuntime.async(function sendWheelsRequest$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:id=_args3.length>5&&_args3[5]!==undefined?_args3[5]:'';console.log([id_FL,id_FR,id_BL,id_BR]);_context3.next=4;return _regeneratorRuntime.awrap(timeoutPromise(2000,fetch('https://api.race24.cloud/wheel_cont/createWheels',{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({acces_token:accestoken,id_FL:id_FL,id_FR:id_FR,id_BL:id_BL,id_BR:id_BR,id:id})})).then(function(response){return response.json();}).then(function(data){if(\"msg\"in data){if(data[\"msg\"]===\"Token has expired\"){refreshToken().then(function(token){sendWheelsRequest(accestoken,id_FL,id_FR,id_BL,id_BR,id);}).catch(function(error){console.log(\"Refresh failed\");console.log(error);});return[];}}else{console.log(\"Return Data\");console.log(data[0].id);return data[0].id;}return[];}).catch(function(error){console.log(error);return[];}));case 4:return _context3.abrupt(\"return\",_context3.sent);case 5:case\"end\":return _context3.stop();}}},null,null,null,Promise);}function sendWheelSetRequest(id_FL,id_FR,id_BL,id_BR){var id,_args4=arguments;return _regeneratorRuntime.async(function sendWheelSetRequest$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:id=_args4.length>4&&_args4[4]!==undefined?_args4[4]:'';timeoutPromise(2000,fetch('https://api.race24.cloud/wheel_cont/createWheels',{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({id_FL:id_FL,id_FR:id_FR,id_BL:id_BL,id_BR:id_BR,id:id})})).then(function(response){return response.json();}).then(function(response){return response.json();}).then(function(data){if(data[1]==200){console.log(data);return data[0].id;}}).catch(function(error){console.log(error);return 0;});case 2:case\"end\":return _context4.stop();}}},null,null,null,Promise);}function sendNewSetRequest(raceID,setNr,cat,subcat,wheels){return _regeneratorRuntime.async(function sendNewSetRequest$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:console.log([raceID,setNr,cat,subcat,wheels]);timeoutPromise(2000,fetch('https://api.race24.cloud/wheel_cont/createSet',{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({id:'',setNr:setNr,cat:cat,subcat:subcat,raceID:raceID,wheels:wheels})})).then(function(response){return response.json();}).then(function(data){if(data[1]==200){console.log(data);};return data[0].id;}).catch(function(error){console.log(error);});case 2:case\"end\":return _context5.stop();}}},null,null,null,Promise);}function timeoutPromise(ms,promise){return new Promise(function(resolve,reject){var timeoutId=setTimeout(function(){reject(new Error('promise timeout'));},ms);promise.then(function(res){clearTimeout(timeoutId);resolve(res);},function(err){clearTimeout(timeoutId);reject(err);});});}function refreshToken(){var accesstoken,refreshtoken;return _regeneratorRuntime.async(function refreshToken$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return _regeneratorRuntime.awrap(AsyncStorage.getItem('accesstoken'));case 2:accesstoken=_context6.sent;_context6.next=5;return _regeneratorRuntime.awrap(AsyncStorage.getItem('refreshtoken'));case 5:refreshtoken=_context6.sent;_context6.next=8;return _regeneratorRuntime.awrap(timeoutPromise(2000,fetch('https://api.race24.cloud/user/auth/refresh',{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({access_token:accesstoken,refresh_token:refreshtoken})})).then(function(response){return response.json();}).then(function(data){AsyncStorage.setItem('accesstoken',String(data.access_token));}));case 8:case\"end\":return _context6.stop();}}},null,null,null,Promise);}export{generateAllSets,sendWheelRequest,sendNewSetRequest,sendWheelsRequest};","map":{"version":3,"sources":["/home/toni/PycharmProjects/PropraSource/frontend/tools_wheel.js"],"names":["AsyncStorage","createKeyboardAwareNavigator","generateAllSets","raceID","set","cat","subcat","numberOfSets","i","parseInt","console","log","generateNewWheelSet","setNr","cols","sendWheelRequest","then","Data","push","catch","error","sendWheelsRequest","debug","sendNewSetRequest","accestoken","air_press","id_scan","id","timeoutPromise","fetch","method","headers","body","JSON","stringify","aceess_tolen","response","json","data","refreshToken","token","id_FL","id_FR","id_BL","id_BR","acces_token","sendWheelSetRequest","wheels","ms","promise","Promise","resolve","reject","timeoutId","setTimeout","Error","res","clearTimeout","err","getItem","accesstoken","refreshtoken","access_token","refresh_token","setItem","String"],"mappings":"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","sourcesContent":["import AsyncStorage from '@react-native-async-storage/async-storage';\nimport {createKeyboardAwareNavigator} from \"react-navigation\";\n\nfunction generateAllSets(raceID,set,cat,subcat,numberOfSets){\n        for(let i =1; i < parseInt(numberOfSets)+1;i++){\n            console.log(i);\n            generateNewWheelSet(raceID,i,cat,subcat);\n        }\n    }\n\n\n\nasync function generateNewWheelSet(raceID,setNr,cat,subcat){\n    let cols = [];\n    for (let i =0; i < 4; i++) {\n        await sendWheelRequest(0,'', '').then(Data => {\n            console.log(Data);\n            cols.push(Data);\n        }).catch(function (error) {\n            console.log(error);\n        })\n        //const idwheel = await AsyncStorage.getItem('WheelID')\n\n    }\n    console.log(cols)\n  await sendWheelsRequest(parseInt( cols[0]), parseInt(cols[1]), parseInt(cols[2]), parseInt(cols[3]), '').then(Data => {\n            console.log(Data);\n            cols.push(Data);\n        }).catch(function (error) {\n            console.log(error);\n        });\n    console.debug(cols[4])\n    // sendNewSetRequest(raceID,setNr,cat,subcat,wheels)\n    sendNewSetRequest(raceID,setNr,cat, subcat,cols[4] );\n}\n\n\nasync function sendWheelRequest(accestoken,air_press = 0,id_scan='',id = '' ) {\n   return await timeoutPromise(2000, fetch(\n        'https://api.race24.cloud/wheel_cont/createWheel', {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                aceess_tolen:accestoken,\n                air_press:air_press,\n                id_scan:id_scan,\n                id:id,\n            })\n        })\n        ).then(response => response.json()).then(data => {\n                if (\"msg\" in data){\n                            if (data[\"msg\"] === \"Token has expired\"){\n                                refreshToken().then( token => {\n                                    sendWheelRequest(accestoken,air_press,id_scan,id  );\n                                    }\n                                ).catch( function (error) {\n                                        console.log(\"Refresh failed\");\n                                        console.log(error);\n                                    }\n                                );\n                                return [];\n                            }\n                        }\n              else{\n                  console.log(\"Return Data\");\n                  console.log(data[0].id);\n                  return data[0].id;\n              }\n              return [];\n      }).catch(function (error) {\n            console.log(error);\n            return [];\n        })\n}\n\n\n\n//generate one wheelS and return id\nasync function sendWheelsRequest(accestoken,id_FL,id_FR,id_BL,id_BR,id = '') {\n    console.log([id_FL,id_FR,id_BL,id_BR]);\n   return await timeoutPromise(2000, fetch(\n        'https://api.race24.cloud/wheel_cont/createWheels', {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                acces_token:accestoken,\n                id_FL:id_FL,\n                id_FR:id_FR,\n                id_BL:id_BL,\n                id_BR:id_BR,\n                id:id,\n            })\n        })\n        ).then(response => response.json()).then(data => {\n                if (\"msg\" in data){\n                            if (data[\"msg\"] === \"Token has expired\"){\n                                refreshToken().then( token => {\n                                    sendWheelsRequest(accestoken,id_FL,id_FR,id_BL,id_BR,id );\n                                    }\n                                ).catch( function (error) {\n                                        console.log(\"Refresh failed\");\n                                        console.log(error);\n                                    }\n                                );\n                                return [];\n                            }\n                        }\n              else{\n                  console.log(\"Return Data\");\n                  console.log(data[0].id);\n                  return data[0].id;\n              }\n              return [];\n      }).catch(function (error) {\n            console.log(error);\n            return [];\n        })\n}\n\n\n//generate one wheelsSet and return id\nasync function sendWheelSetRequest(id_FL,id_FR,id_BL,id_BR,id = '') {\n   timeoutPromise(2000, fetch(\n        'https://api.race24.cloud/wheel_cont/createWheels', {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                id_FL:id_FL,\n                id_FR:id_FR,\n                id_BL:id_BL,\n                id_BR:id_BR,\n                id:id,\n            })\n        })\n        ).then(response => response.json()).then(response => response.json()).then(\n            data => {\n                if (data[1]==200){\n              console.log(data);\n              return data[0].id;\n              }\n      }).catch(function (error) {\n            console.log(error);\n            return 0;\n        })\n}\n\n\n\n\n//create new Set request\nasync function sendNewSetRequest(raceID,setNr,cat,subcat,wheels) {\n    console.log([raceID,setNr,cat,subcat,wheels])\n   timeoutPromise(2000, fetch(\n        'https://api.race24.cloud/wheel_cont/createSet', {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                id: '',\n                setNr:setNr,\n                cat:cat,\n                subcat:subcat,\n                raceID:raceID,\n                wheels : wheels,\n            })\n        })\n        ).then(response => response.json()).then(\n            data =>{\n                if(data[1]==200){\n                console.log(data)};\n                return data[0].id\n            }).catch(function (error) {\n            console.log(error);\n        })\n}\n\n\n//  ----------------------------------------------------------------------------------------------\n\nfunction timeoutPromise(ms, promise) {\n  return new Promise((resolve, reject) => {\n    const timeoutId = setTimeout(() => {\n      reject(new Error('promise timeout'))\n    }, ms);\n    promise.then(\n      (res) => {\n        clearTimeout(timeoutId);\n        resolve(res);\n      },\n      (err) => {\n        clearTimeout(timeoutId);\n        reject(err);\n      }\n    );\n  })\n}\n\n\n\nasync function refreshToken() {\n  let accesstoken = await AsyncStorage.getItem('accesstoken');\n  let refreshtoken = await AsyncStorage.getItem('refreshtoken');\n  await timeoutPromise(2000, fetch(\n      'https://api.race24.cloud/user/auth/refresh', {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          access_token: accesstoken,\n          refresh_token: refreshtoken,\n        })\n      }\n  )).then(\n      response => response.json()\n  ).then(\n      data => {\n        AsyncStorage.setItem('accesstoken', String(data.access_token));\n      }\n  )\n}\n\n\n\nexport {generateAllSets,sendWheelRequest,sendNewSetRequest,sendWheelsRequest}\n\n"]},"metadata":{},"sourceType":"module"}