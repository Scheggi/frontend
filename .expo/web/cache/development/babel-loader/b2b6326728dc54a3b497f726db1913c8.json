{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nfunction createNewRaceRequest(accesstoken, type, place, date) {\n  return _regeneratorRuntime.async(function createNewRaceRequest$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          timeoutPromise(2000, fetch('https://api.race24.cloud/race/create', {\n            method: 'POST',\n            headers: {\n              'Accept': 'application/json',\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              accesstoken: accesstoken,\n              type: type,\n              place: place,\n              date: date\n            })\n          })).then(function (response) {\n            return response.json();\n          }).then(function (data) {\n            if (\"msg\" in data) {\n              if (data[\"msg\"] === \"Token has expired\") {\n                refreshToken().then(function (token) {\n                  screateNewRaceRequest(token, type, place, date);\n                }).catch(function (error) {\n                  console.log(\"Refresh failed\");\n                  console.log(error);\n                });\n                return [];\n              }\n            } else {\n              return data[0].id;\n            }\n\n            return [];\n          }).catch(function (error) {\n            console.log(error);\n            return [];\n          });\n\n        case 1:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\n\nfunction sendNewRaceRequest(id, temp_air, temp_ground, weather_des) {\n  return _regeneratorRuntime.async(function sendNewRaceRequest$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          timeoutPromise(2000, fetch('https://api.race24.cloud/user/weather/create', {\n            method: 'POST',\n            headers: {\n              'Accept': 'application/json',\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              raceID: AsyncStorage.getItem(\"raceID\"),\n              temp_air: temp_air,\n              temp_ground: temp_ground,\n              weather_des: weather_des\n            })\n          })).then(function (response) {\n            return response.json();\n          }).then().catch(function (error) {\n            console.log(error);\n          });\n\n        case 1:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\n\nfunction timeoutPromise(ms, promise) {\n  return new Promise(function (resolve, reject) {\n    var timeoutId = setTimeout(function () {\n      reject(new Error(\"promise timeout\"));\n    }, ms);\n    promise.then(function (res) {\n      clearTimeout(timeoutId);\n      resolve(res);\n    }, function (err) {\n      clearTimeout(timeoutId);\n      reject(err);\n    });\n  });\n}\n\nfunction getRaceList(accesstoken) {\n  return timeoutPromise(2000, fetch(\"https://api.race24.cloud/user/race/get\", {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      access_token: accesstoken\n    })\n  })).then(function (response) {\n    return response.json();\n  }).then(function (data) {\n    console.log(data);\n\n    if (\"msg\" in data) {\n      if (data[\"msg\"] === \"Token has expired\") {\n        refreshToken().then(function (token) {\n          getRaceList(token);\n        }).catch(function (error) {\n          console.log(\"Refresh failed\");\n          console.log(error);\n        });\n        return [];\n      }\n    } else {\n      console.log(\"Return Data\");\n      console.log(data[0].data);\n      return data[0].data;\n    }\n\n    return [];\n  }).catch(function (error) {\n    console.log(error);\n    return [];\n  });\n}\n\nfunction getRaceDetails_by_ID(accesstoken, raceid) {\n  return timeoutPromise(2000, fetch(\"https://api.race24.cloud/user/raceDetails/get\", {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      access_token: accesstoken,\n      raceID: raceid\n    })\n  })).then(function (response) {\n    return response.json();\n  }).then(function (data) {\n    console.log(data);\n\n    if (\"msg\" in data) {\n      if (data[\"msg\"] === \"Token has expired\") {\n        refreshToken().then(function (token) {\n          getRaceDetails_by_ID(token, raceid);\n          console.log([token, raceid]);\n        }).catch(function (error) {\n          console.log(\"Refresh failed\");\n          console.log(error);\n        });\n        return [];\n      }\n    } else {\n      console.log(\"Return Data\");\n      console.log(data[0].data);\n      return data[0].data;\n    }\n\n    return [];\n  }).catch(function (error) {\n    console.log(error);\n    return [];\n  });\n}\n\nfunction getWeatherTab(accesstoken, raceID) {\n  console.log(raceID);\n  return timeoutPromise(2000, fetch(\"https://api.race24.cloud/user/weather/getlast10\", {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      access_token: accesstoken,\n      raceID: raceID\n    })\n  })).then(function (response) {\n    return response.json();\n  }).then(function (data) {\n    console.log(data);\n\n    if (\"msg\" in data) {\n      if (data[\"msg\"] === \"Token has expired\") {\n        refreshToken().then(function (token) {\n          getWeatherTab(token, raceID);\n        }).catch(function (error) {\n          console.log(\"Refresh failed\");\n          console.log(error);\n        });\n        return [];\n      }\n    } else {\n      console.log(\"Return Data\");\n      console.log(data[0].data);\n      return data[0].data;\n    }\n\n    return [];\n  }).catch(function (error) {\n    console.log(error);\n    return [];\n  });\n}\n\nfunction getWheelsList(accesstoken, raceID) {\n  console.log([raceID]);\n  return timeoutPromise(2000, fetch(\"https://api.race24.cloud/wheels_start/get\", {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      access_token: accesstoken,\n      raceID: parseInt(raceID)\n    })\n  })).then(function (response) {\n    return response.json();\n  }).then(function (data) {\n    console.log(data);\n\n    if (\"msg\" in data) {\n      if (data[\"msg\"] === \"Token has expired\") {\n        refreshToken().then(function (token) {\n          getWheelsList(token, raceID);\n        }).catch(function (error) {\n          console.log(\"Refresh failed\");\n          console.log(error);\n        });\n        return [];\n      }\n    } else {\n      console.log(\"Return Data\");\n      console.log(data[0].data);\n      return data[0].data;\n    }\n\n    return [];\n  }).catch(function (error) {\n    console.log(error);\n    return [];\n  });\n}\n\nfunction getFormelList(accesstoken) {\n  return timeoutPromise(2000, fetch(\"https://api.race24.cloud/formel/get\", {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      access_token: accesstoken\n    })\n  })).then(function (response) {\n    return response.json();\n  }).then(function (data) {\n    console.log(data);\n\n    if (\"msg\" in data) {\n      if (data[\"msg\"] === \"Token has expired\") {\n        refreshToken().then(function (token) {\n          getFormelList(token);\n        }).catch(function (error) {\n          console.log(\"Refresh failed\");\n          console.log(error);\n        });\n        return [];\n      }\n    } else {\n      console.log(\"Return Data\");\n      console.log(data[0].data);\n      return data[0].data;\n    }\n\n    return [];\n  }).catch(function (error) {\n    console.log(error);\n    return [];\n  });\n}\n\nfunction refreshToken() {\n  var accesstoken, refreshtoken;\n  return _regeneratorRuntime.async(function refreshToken$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return _regeneratorRuntime.awrap(AsyncStorage.getItem('accesstoken'));\n\n        case 2:\n          accesstoken = _context3.sent;\n          _context3.next = 5;\n          return _regeneratorRuntime.awrap(AsyncStorage.getItem('refreshtoken'));\n\n        case 5:\n          refreshtoken = _context3.sent;\n          _context3.next = 8;\n          return _regeneratorRuntime.awrap(timeoutPromise(2000, fetch('https://api.race24.cloud/user/auth/refresh', {\n            method: 'POST',\n            headers: {\n              'Accept': 'application/json',\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              access_token: accesstoken,\n              refresh_token: refreshtoken\n            })\n          })).then(function (response) {\n            return response.json();\n          }).then(function (data) {\n            AsyncStorage.setItem('accesstoken', String(data.access_token));\n          }));\n\n        case 8:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\n\nfunction TableNiklas(list) {\n  var colNames = ['Zeitstempel', 'Lufttemperatur', 'Streckentemperatur', 'Streckenverhältnis'];\n  var number = 920;\n  return React.createElement(\"div\", null, list.length > 0 && React.createElement(\"table\", {\n    cellSpacing: \"0\",\n    style: {\n      width: width,\n      height: \"auto\",\n      margin: 15,\n      borderWidth: 1\n    }\n  }, React.createElement(\"thead\", null, React.createElement(\"tr\", null, colNames.map(function (headerItem, index) {\n    return React.createElement(\"th\", {\n      style: {\n        borderStyle: 'solid',\n        borderWidth: 1\n      },\n      key: index\n    }, headerItem);\n  }))), React.createElement(\"tbody\", null, Object.values(list).map(function (obj, index) {\n    return React.createElement(\"tr\", {\n      key: index\n    }, Object.values(obj).map(function (value, index2) {\n      return React.createElement(\"td\", {\n        style: {\n          borderStyle: 'solid',\n          borderWidth: 1\n        },\n        key: index2\n      }, value);\n    }));\n  }))));\n}\n\nexport { createNewRaceRequest, getWeatherTab, timeoutPromise, refreshToken, getRaceList, getFormelList, TableNiklas, getWheelsList, getRaceDetails_by_ID };","map":{"version":3,"sources":["/home/toni/PycharmProjects/PropraSource/frontend/tools.js"],"names":["AsyncStorage","createNewRaceRequest","accesstoken","type","place","date","timeoutPromise","fetch","method","headers","body","JSON","stringify","then","response","json","data","refreshToken","token","screateNewRaceRequest","catch","error","console","log","id","sendNewRaceRequest","temp_air","temp_ground","weather_des","raceID","getItem","ms","promise","Promise","resolve","reject","timeoutId","setTimeout","Error","res","clearTimeout","err","getRaceList","accesstoken","access_token","getRaceDetails_by_ID","raceid","getWeatherTab","getWheelsList","parseInt","getFormelList","refreshtoken","refresh_token","setItem","String","TableNiklas","list","colNames","number","length","width","height","margin","borderWidth","map","headerItem","index","borderStyle","Object","values","obj","value","index2"],"mappings":"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","sourcesContent":["import AsyncStorage from '@react-native-async-storage/async-storage';\n\n// create new race and return raceID\nasync function createNewRaceRequest(accesstoken,type,place,date) {\n       timeoutPromise(2000, fetch(\n            'https://api.race24.cloud/race/create', {\n                method: 'POST',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    accesstoken:accesstoken,\n                    type:type,\n                    place:place,\n                    date:date,\n                })\n            })\n            ).then(response => response.json()).then(data => {\n                if (\"msg\" in data){\n                            if (data[\"msg\"] === \"Token has expired\"){\n                                refreshToken().then( token => {\n                                    screateNewRaceRequest(token,type,place,date);\n                                    }\n                                ).catch( function (error) {\n                                        console.log(\"Refresh failed\");\n                                        console.log(error);\n                                    }\n                                );\n                                return [];\n                            }\n                        }\n              else{\n                  return data[0].id;\n              }\n              return [];\n      }).catch(function (error) {\n            console.log(error);\n            return [];\n        })\n}\n\n\n\nasync function sendNewRaceRequest(id,temp_air,temp_ground,weather_des) {\n   timeoutPromise(2000, fetch(\n        'https://api.race24.cloud/user/weather/create', {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                raceID: AsyncStorage.getItem(\"raceID\"),\n                temp_air:temp_air,\n                temp_ground:temp_ground,\n                weather_des:weather_des,\n            })\n        })\n        ).then(response => response.json()).then(\n            //timer von 30 min neu startem\n            ).catch(function (error) {\n            console.log(error);\n        })\n}\n\n\n\nfunction timeoutPromise(ms, promise) {\n  return new Promise((resolve, reject) => {\n    const timeoutId = setTimeout(() => {\n      reject(new Error(\"promise timeout\"))\n    }, ms);\n    promise.then(\n      (res) => {\n        clearTimeout(timeoutId);\n        resolve(res);\n      },\n      (err) => {\n        clearTimeout(timeoutId);\n        reject(err);\n      }\n    );\n  })\n}\n\n//get Race List\nfunction getRaceList(accesstoken) {\n  //const accesstoken = AsyncStorage.getItem('accesstoken');\n  return timeoutPromise(2000, fetch(\"https://api.race24.cloud/user/race/get\", {\n      method: 'POST',\n      headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n          access_token: accesstoken,\n      })\n      })).then(response => response.json()).then(data => {\n              console.log(data);\n              if (\"msg\" in data){\n                            if (data[\"msg\"] === \"Token has expired\"){\n                                refreshToken().then( token => {\n                                        getRaceList(token);\n                                    }\n                                ).catch( function (error) {\n                                        console.log(\"Refresh failed\");\n                                        console.log(error);\n                                    }\n                                );\n                                return [];\n                            }\n                        }\n              else{\n                  console.log(\"Return Data\");\n                  console.log(data[0].data);\n                  return data[0].data;\n              }\n              return [];\n      }).catch(function (error) {\n            console.log(error);\n            return [];\n        })\n}\n\n// get RaceDetails od RaceID\nfunction getRaceDetails_by_ID(accesstoken,raceid) {\n  //const accesstoken = AsyncStorage.getItem('accesstoken');\n  return timeoutPromise(2000, fetch(\"https://api.race24.cloud/user/raceDetails/get\", {\n      method: 'POST',\n      headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n          access_token: accesstoken,\n          raceID:raceid,\n      })\n      })).then(response => response.json()).then(data => {\n              console.log(data);\n              if (\"msg\" in data){\n                            if (data[\"msg\"] === \"Token has expired\"){\n                                refreshToken().then( token => {\n                                        getRaceDetails_by_ID(token,raceid);\n                                        console.log([token,raceid])\n                                    }\n                                ).catch( function (error) {\n                                        console.log(\"Refresh failed\");\n                                        console.log(error);\n                                    }\n                                );\n                                return [];\n                            }\n                        }\n              else{\n                  console.log(\"Return Data\");\n                  console.log(data[0].data);\n                  return data[0].data;\n              }\n              return [];\n      }).catch(function (error) {\n            console.log(error);\n            return [];\n        })\n}\n\n\n\n\n///user/weather/getlast10\n//get Weather Tab\nfunction getWeatherTab(accesstoken,raceID) {\n    console.log(raceID)\n  return timeoutPromise(2000, fetch(\"https://api.race24.cloud/user/weather/getlast10\", {\n      method: 'POST',\n      headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n          access_token: accesstoken,\n          raceID : raceID,\n      })\n      })).then(response => response.json()).then(data => {\n              console.log(data);\n              if (\"msg\" in data){\n                            if (data[\"msg\"] === \"Token has expired\"){\n                                refreshToken().then( token => {\n                                        getWeatherTab(token,raceID);\n                                    }\n                                ).catch( function (error) {\n                                        console.log(\"Refresh failed\");\n                                        console.log(error);\n                                    }\n                                );\n                                return [];\n                            }\n                        }\n              else{\n                  console.log(\"Return Data\");\n                  console.log(data[0].data);\n                  return data[0].data;\n              }\n              return [];\n      }).catch(function (error) {\n            console.log(error);\n            return [];\n        })\n}\n\n\n//get Wheels\nfunction getWheelsList(accesstoken,raceID) {\n  //const accesstoken = AsyncStorage.getItem('accesstoken');\n    console.log([raceID])\n  return timeoutPromise(2000, fetch(\"https://api.race24.cloud/wheels_start/get\", {\n      method: 'POST',\n      headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n          access_token: accesstoken,\n          raceID: parseInt(raceID)\n      })\n      })).then(response => response.json()).then(data => {\n              console.log(data);\n              if (\"msg\" in data){\n                            if (data[\"msg\"] === \"Token has expired\"){\n                                refreshToken().then( token => {\n                                        getWheelsList(token,raceID);\n                                    }\n                                ).catch( function (error) {\n                                        console.log(\"Refresh failed\");\n                                        console.log(error);\n                                    }\n                                );\n                                return [];\n                            }\n                        }\n              else{\n                  console.log(\"Return Data\");\n                  console.log(data[0].data);\n                  return data[0].data;\n              }\n              return [];\n      }).catch(function (error) {\n            console.log(error);\n            return [];\n        })\n}\n\n\n\n\n\nfunction getFormelList(accesstoken) {\n  //const accesstoken = AsyncStorage.getItem('accesstoken');\n  return timeoutPromise(2000, fetch(\"https://api.race24.cloud/formel/get\", {\n      method: 'POST',\n      headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n          access_token: accesstoken,\n      })\n      })).then(response => response.json()).then(data => {\n              console.log(data);\n              if (\"msg\" in data){\n                            if (data[\"msg\"] === \"Token has expired\"){\n                                refreshToken().then( token => {\n                                        getFormelList(token);\n                                    }\n                                ).catch( function (error) {\n                                        console.log(\"Refresh failed\");\n                                        console.log(error);\n                                    }\n                                );\n                                return [];\n                            }\n                        }\n              else{\n                  console.log(\"Return Data\");\n                  console.log(data[0].data);\n                  return data[0].data;\n              }\n              return [];\n      }).catch(function (error) {\n            console.log(error);\n            return [];\n        })\n}\n\n\n\nasync function refreshToken() {\n  let accesstoken = await AsyncStorage.getItem('accesstoken');\n  let refreshtoken = await AsyncStorage.getItem('refreshtoken');\n  await timeoutPromise(2000, fetch(\n      'https://api.race24.cloud/user/auth/refresh', {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          access_token: accesstoken,\n          refresh_token: refreshtoken,\n        })\n      }\n  )).then(\n      response => response.json()\n  ).then(\n      data => {\n        AsyncStorage.setItem('accesstoken', String(data.access_token));\n      }\n  )\n}\n\nfunction TableNiklas(list) {\n    const colNames = ['Zeitstempel', 'Lufttemperatur', 'Streckentemperatur', 'Streckenverhältnis' ];\n    const number = 920 ;\n    return (\n        <div>\n          {list.length > 0 && (\n            <table\n              cellSpacing='0'\n              style={{\n              \twidth: width,\n              \theight: \"auto\",\n              \tmargin: 15,\n              \tborderWidth: 1,\n\n              }}>\n\n                <thead >\n                  <tr>\n                    {colNames.map((headerItem, index) => (\n                      <th style={{borderStyle: 'solid',  borderWidth: 1}} key={index}>{headerItem}</th>\n                    ))}\n                  </tr>\n                </thead>\n\n                <tbody>\n                  {Object.values(list).map((obj, index) => (\n                    <tr key={index}>\n                      {Object.values(obj).map((value, index2) => (\n                        <td style={{borderStyle: 'solid',  borderWidth: 1}} key={index2}>{value}</td>\n                      ))}\n                    </tr>\n                  ))}\n                </tbody>\n            </table>\n          )}\n        </div>\n        )\n    }\n\n\n\n\nexport {createNewRaceRequest,getWeatherTab,timeoutPromise, refreshToken,getRaceList,getFormelList,TableNiklas,getWheelsList,getRaceDetails_by_ID}\n\n"]},"metadata":{},"sourceType":"module"}